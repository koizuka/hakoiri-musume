# 箱入り娘 (Hakoiri-musume) - 滑り駒パズルゲーム

伝統的な日本の滑り駒パズル「箱入り娘」をReactで実装したWebアプリケーションです。

## 🎮 今すぐプレイ

**[https://koizuka.github.io/hakoiri-musume/](https://koizuka.github.io/hakoiri-musume/)** でゲームを楽しめます！

## ゲームについて

箱入り娘は、4×5の盤面で駒を滑らせて娘（2×2の大きな駒）を下部の出口まで移動させるパズルゲームです。

<img width="509" height="668" alt="image" src="https://github.com/user-attachments/assets/7c483a9e-333a-4fb7-8e76-4243fffeac7d" />

### 駒の種類

- **娘** (2×2): ゲームの目標となる駒
- **父親** (1×2): 縦長の駒
- **母親** (1×2): 縦長の駒  
- **下男** (1×2): 縦長の駒
- **下女** (1×2): 縦長の駒
- **番頭** (2×1): 横長の駒
- **小僧** (1×1): 小さな駒 ×4個

## 操作方法

### マウス/タッチ操作

- 駒の周囲に表示される矢印ハンドルをクリック/タップして移動
- **インテリジェントハンドル表示**: タッチ時は自動非表示、マウス操作時は自動表示

### スワイプ操作（モバイル）

- 駒を直接スワイプして移動（上下左右）
- **連続スワイプ**: 指を離さずに駒を連続して移動可能
- **同方向連続移動**: 同じ方向に2マス以上の移動も可能

### キーボード操作

- **矢印キー**: 選択された駒を移動
- **スペースキー**: 移動可能な駒を循環選択
- **U キー**: 手を戻す（アンドゥ）
- **ESC キー**: ゲームをリセット
- **H キー**: ハンドル表示の手動切り替え

### 特殊機能

- **自動アンドゥ**: 直前の手と逆方向に動かすと自動的に手数が減る
- **スマートキーマッピング**: 最後に動かした駒が優先的に選択される
- **視覚フィードバック**: 選択中の駒のハンドルがハイライト表示
- **直感的スワイプ**: モバイルでの自然な操作体験
- **アダプティブハンドル**: 操作方法に応じて自動的にハンドル表示を最適化

## 技術仕様

### 技術スタック

- **React 19** - UIライブラリ
- **TypeScript** - 型安全性
- **Vite** - ビルドツール
- **Tailwind CSS v4** - スタイリング
- **shadcn/ui** - UIコンポーネント
- **Vitest** - テストフレームワーク

### プロジェクト構成

```
src/
  components/
    GameBoard.tsx       # メインゲーム画面
    Piece.tsx          # 個別の駒コンポーネント
    Handle.tsx         # 移動ハンドル
    GameControls.tsx   # UI操作パネル
    WinModal.tsx       # 勝利時のモーダル
    ui/                # shadcn/uiコンポーネント
  hooks/
    useGameEngine.ts   # ゲーム状態管理
  lib/
    gameLogic.ts       # ゲームロジック
    gameData.ts        # 初期配置データ
    keyboardMapping.ts # キーボード制御
    undoLogic.ts       # アンドゥ機能
    utils.ts           # ユーティリティ
  types/
    game.ts            # 型定義
```

## 開発・実行

### 前提条件

- Node.js 18以上
- npm または yarn

### セットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build

# テスト実行
npm test

# Lint実行
npm run lint

# プロダクションプレビュー
npm run preview
```

## ゲームの特徴

### UI/UX

- **レスポンシブデザイン**: モバイル・デスクトップ対応
- **アクセシビリティ**: キーボード操作完全対応
- **視覚的フィードバック**: 直感的な操作感
- **日本語UI**: 完全日本語対応
- **マルチタッチ対応**: スワイプ操作による快適なモバイル体験

### ゲーム機能

- **手数カウント**: 最小手数を目指せる
- **アンドゥ機能**: 失敗を気にせず試行錯誤可能
- **自動アンドゥ**: スムーズな操作体験
- **リセット機能**: いつでも初期状態に戻せる

## ライセンス

MIT License

## 作者

Claude Code で開発
